---
title: "Deployment Lifecycle"
---

## Deploying a custom node

Custom nodes are deployed by adding a subfolder to the `custom_nodes` directory. When Comfy starts,
it scans this directory for python modules (subdirectories containing an `__init__.py` file).

### __init__.py

`__init__.py` is executed when Comfy attempts to import the module. For a module to be recognised as containing
custom node definitions, it needs to export `NODE_CLASS_MAPPINGS`. If it does (and if nothing goes wrong in the import),
the nodes defined in the module will be available in Comfy. If there is an error in your code, 
Comfy will still restart, but will report the module as having failed to load. So check the Python console!

<Tip>Python modules export whatever is listed in their `__all__` attribute.</Tip>

#### NODE_CLASS_MAPPINGS

`NODE_CLASS_MAPPINGS` must be a `dict` mapping custom node names (which must each be unique across the Comfy install) 
to the corresponding node class. So a minimal `__init__.py` might look like this:

```python
from .python_file import MyCustomNode
NODE_CLASS_MAPPINGS = { "My Custom Node" : MyCustomNode }
__all__ = ["NODE_CLASS_MAPPINGS"]
```

#### NODE_DISPLAY_NAME_MAPPINGS

`__init__.py` may also export `NODE_DISPLAY_NAME_MAPPINGS`, which maps the same unique name to a display name for the node.
If `NODE_DISPLAY_NAME_MAPPINGS` is not provided, Comfy will use the unique name as the display name.

#### WEB_DIRECTORY

If you are deploying client side code, you will also need to export the path, relative to the module, in which the 
JavaScript files are to be found. It is conventional to place these in a subdirectory of your custom node named `js`.
<Tip>*only* `.js` files will be served</Tip>

<Warning>In previous versions of Comfy, `__init__.py` was required to copy the JavaScript files into the main Comfy web
subdirectory. You will still see code that does this. Don't.</Warning>

## ComfyUI Manager

While custom nodes can be installed manually, most people use
[ComfyUI Manager](https://github.com/ltdrdata/ComfyUI-Manager) to install them.

`ComfyUI Manager` takes care of installing, updating, and removing custom nodes, and any dependencies. But it isn't part
of the Comfy core, so you need to manually install it. 

### Installing ComfyUI Manager

```bash
cd ComfyUI/custom_nodes
git clone https://github.com/ltdrdata/ComfyUI-Manager.git
```

Restart Comfy afterwards.






### How Custom Nodes are Installed

<Steps>
<Step title="Git Clone">
The Manager will git clone the repository.
</Step>
<Step title="Install Python Dependencies">
<Warning>It is possible to have pip conflicts. </Warning>
It will install the pip dependencies listed in the custom node repository under `requirements.txt`.

```
pip install -r requirements.txt
```

</Step>
<Step title="Run Install Script">

Manager will execute `install.py`, if it is present in the custom node repository.

</Step>
</Steps>
### Disable

When a custom node is disabled, the Manager will run `disable.py`, if present in the custom node repository. A `.disabled` suffix will be added to the directory of the custom node to disable it.

When loading custom nodes, Comfy will skip any directory with a `.disabled` suffix.

In [nodes.py](https://github.com/comfyanonymous/ComfyUI/blob/master/nodes.py#L1922C38-L1922C46):
```python
if module_path.endswith(".disabled"): continue
```


### Enable

When a custom node is enabled, the Manager will run `enable.py` in the custom node repository.
